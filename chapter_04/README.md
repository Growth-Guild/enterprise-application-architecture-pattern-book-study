# Chapter 04. 웹 프레젠테이션
- - -

## 모델 뷰 컨트롤러
* 입력 컨트롤러는 요청을 받고 요청에서 정보를 꺼낸다.
* 꺼낸 정보는 비즈니스 논리를 적절한 모델 객체로 전달한다.
* 모델 객체는 데이터 원본 객체와 통신하고 요청에 명시된 모든 작업을 수행한 다음 응답에 필요한 정보를 수집한다.
* 작업이 완료되면 입력 컨트롤러는 결과를 조사하고 응답을 표시하는 데 필요한 뷰를 결정한다.
* 입력 컨트롤러는 응답 데이터와 함께 제어를 뷰로 전달한다.

### 모델 뷰 컨트롤러를 적용하는 이유
* 모델을 웹 프레젠테이션으로부터 완전히 분리하기 위함이다.
  * 프레젠테이션을 수정하는 것은 물론 나중에 다른 프레젠테이션을 추가하기도 쉬워진다.
* 처리를 별도의 트랜잭션 스크립트나 도메인 모델 객체에서 수행하면 테스트하기도 수월하다.

### 애플리케이션 컨트롤러
* 여러 사용자 인터페이스 설계에서는 프레젠테이션 객체를 도메인 객체로부터 분리하기 위해 애플리케이션 컨트롤러 객체라는 중간 계층을 사용한다.
* 애플리케이션 컨트롤러는 애플리케이션의 흐름을 처리하고 어떤 화면을 어떤 순서로 표시할지 결정하는 역할을 한다.
* 이 계층은 프레젠테이션 계층의 일부로 보일 수도 있지만 프레젠테이션과 도메인 계층을 조정하는 별도의 계층으로 생각할 수 있다.
* 애플리케이션 컨트롤러는 모든 프레젠테이션과 독립적으로 만들 수 있다.
* 모든 시스템에 애플리케이션 컨트롤러가 필요한 것은 아니다.
  * 애플리케이션 컨틀로러는 시스템 화면 순서와 화면 간 이동과 관련된 논리가 많은 경우에 유용하다.
  * 화면을 순서에 관계없이 볼 수 있는 시스템이라면 애플리케이션 컨트롤러가 크게 필요하지 않을 수 있다.

## 뷰 패턴
* 변환 뷰, 템플릿 뷰, 2단계 뷰라는 세 가지 패턴을 고려해야 한다.
  * 먼저 변환 뷰나 템플릿 뷰 중 어떤 것을 사용할지 결정한 다음, 이 패턴에서 1단계 뷰 또는 2단계 뷰 중 어떤 것을 사용할지 결정해야 한다.

### 템플릿 뷰
* 페이지의 구조 안에 프레젠테이션을 작성하고 페이지에 표식을 삽입해 동적 컨텐츠를 넣은 위치를 지정할 수 있다. (ex. ASP, JSP, PHP)
* 이 기술은 상당히 강력하고 유연하지만, 관리하기 어려운 복잡한 코드로 이어질 가능성이 높다.
* 서버 페이지 기술을 사용하는 경우에 도우미 객체를 활용하는 등의 방법으로 페이지 구조에서 프로그래밍 논리를 철저하게 배제하도록 노력해야 한다.

### 변환 뷰
* 변환 스타일의 프로그램을 사용한다. (ex. XSLT)
* 사용할 도메인 데이터가 XML 형식이거나 이 형식으로 쉽게 변환할 수 잇을 때 아주 효과적이다.
* 입력 컨트롤러는 XSLT 스타일시트를 선택하고 모델에서 얻은 XML에 이를 적용한다.

### 1단계 뷰
* 1단계 뷰는 일반적으로 애플리케이션 화면당 뷰 컴포넌트 하나를 사용한다.
* 뷰는 도메인에서 데이터를 받고 이를 HTML로 렌더링한다.
* 서로 비슷한 논리적 화면이 뷰를 공유하는 경우는 있지만 이 경우에도 화면당 뷰 하나가 사용된다고 간주한다.

### 2단계 뷰
* 1단계 뷰의 과정을 도메인 데이터로부터 논리적 화면을 생성한 다음 이를 HTML로 렌더링하는 두 단계로 나눈다.
* 첫째 단계 뷰는 각 화면마다 하나씩 있지만 두 번째 단계 뷰는 전체 애플리케이션에 하나만 있다.
* 사용할 HTML에 대한 결정을 한 곳으로 모들 수 있다는 장점이 있다.
* 한 객체만 변경하면 사이트의 모든 화면을 변경할 수 있으므로 HTML 전체를 쉽게 변경할 수 있다.
